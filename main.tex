\documentclass[sigconf, review]{acmart}

\usepackage{booktabs} % For formal tables


% Copyright
\setcopyright{none}
%\setcopyright{acmcopyright}
%\setcopyright{acmlicensed}
%\setcopyright{rightsretained}
%\setcopyright{usgov}
%\setcopyright{usgovmixed}
%\setcopyright{cagov}
%\setcopyright{cagovmixed}


% TODO (remove the following for camera ready)
\settopmatter{printacmref=false}

% DOI
%\acmDOI{10.475/123_4}

% ISBN
%\acmISBN{123-4567-24-567/08/06}

%Conference
\acmConference[PACT'18]{ Parallel Architectures and Compilation Techniques}{November 2018}{Limassol, Cyprus}
\acmYear{2018}
\copyrightyear{2018}


%\acmArticle{4}
%\acmPrice{15.00}

% These commands are optional
%\acmBooktitle{Transactions of the ACM Woodstock conference}
%\editor{Jennifer B. Sartor}
%\editor{Theo D'Hondt}
%\editor{Wolfgang De Meuter}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{subcaption}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{listings}
\usepackage{color}
\usepackage{xspace}
\usepackage{comment}
\usepackage{graphicx} 
\usepackage{appendix}
\usepackage{wrapfig}
\usepackage{multirow}
\usepackage{bm}
\usepackage{microtype}
\usepackage{enumitem}

\setlist{leftmargin=5.5mm}

\definecolor{listinggreen}{rgb}{0,0.6,0}
\definecolor{listinggray}{rgb}{0.5,0.5,0.5}
\definecolor{listingmauve}{rgb}{0.58,0,0.82}
\definecolor{listingkeywordcolor}{rgb}{1.0,0.4,0.0}
\definecolor{listinglightgray}{rgb}{0.8863,0.8863,0.8863}

\newcommand\layeronecolor{blue}

\newcommand\TOSAY[1]{{\color{black}\textbf{We Should Say That: }#1}}
\newcommand\COMMENT[1]{}
\newcommand\framework{\textsc{Tiramisu}\xspace}
\newcommand\processor{space\xspace}
\newcommand\Processor{Space\xspace}
\newcommand\layerone{abstract computation layer\xspace}
\newcommand\Layerone{Abstract Computation Layer\xspace}
\newcommand\layertwo{computation placement layer\xspace}
\newcommand\Layertwo{Computation Placement Layer\xspace}
\newcommand\layerthree{concrete computation layer\xspace}
\newcommand\Layerthree{Concrete Computation Layer\xspace}
\newcommand\layerfour{new operation placement layer\xspace}
\newcommand\Layerfour{New Operation Placement Layer\xspace}
\newcommand{\pgrammar}[1]{\text{\sf\textless#1\textgreater}}

\newcommand\codeone{(a)\xspace}
\newcommand\codetwo{(b)\xspace}
\newcommand\codethree{(c)\xspace}
\newcommand\codefour{(d)\xspace}
\newcommand\codefive{(e)\xspace}
\newcommand\codesix{(f)\xspace}
\newcommand{\lone}[2]{{\color{\listingmauve}{#1}}\textbf{ : }{#2}\xspace}
\newcommand{\HIDE}[1]{}
\newcommand\TODO[1]{\mbox{\textcolor{red}{#1}}}

\lstset{ %
  backgroundcolor=\color{white},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}
  basicstyle=\linespread{0.7}\footnotesize\ttfamily,        % the size of the fonts that are used for the code (scriptsize will violate min font size for PLDI)
  columns=fullflexible,
  breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
  breaklines=true,                 % sets automatic line breaking
  captionpos=none,                 % sets the caption-position to bottom
  commentstyle=\color{listinggreen},% comment style
  deletekeywords={...},            % if you want to delete keywords from the given language
  escapeinside={\%*}{*)},          % if you want to add LaTeX within your code
  extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
  frame=none,                      % adds a frame around the code
  keepspaces=true,                 % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
  keywordstyle=\color{listingkeywordcolor}\bfseries,       % keyword style
  language=C,             % the language of the code
  morekeywords={*,...},            % if you want to add more keywords to the set
  numbers=left,                    % where to put the line-numbers; possible values are (none, left, right)
  numbersep=5pt,                   % how far the line-numbers are from the code
  numberstyle=\tiny\color{listinggray}, % the style that is used for the line-numbers
  rulecolor=\color{black},         % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
  showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
  showstringspaces=false,          % underline spaces within strings only
  showtabs=false,                  % show tabs within strings adding particular underscores
  stepnumber=1,                    % the step between two line-numbers. If it's 1, each line will be numbered
  stringstyle=\color{listingmauve},% string literal style
  tabsize=2,                       % sets default tabsize to 2 spaces
  title=\lstname                   % show the filename of files included with \lstinputlisting; also try caption instead of title
}


\newcommand{\cL}{{\cal L}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}
\title{\framework{}: a Code Optimization Framework for   Targeting High Performance Systems}
%\titlenote{Produces the permission block, and copyright information}
%\subtitle{Extended Abstract}
%\subtitlenote{The full version of the author's guide is available as
%  \texttt{acmart.pdf} document}


%\author{Ben Trovato}
%\authornote{Dr.~Trovato insisted his name be first.}
%\orcid{1234-5678-9012}
%\affiliation{%
%  \institution{Institute for Clarity in Documentation}
%  \streetaddress{P.O. Box 1212}
%  \city{Dublin}
%  \state{Ohio}
%  \postcode{43017-6221}
%}
%\email{trovato@corporation.com}

%\author{G.K.M. Tobin}
%\authornote{The secretary disavows any knowledge of this author's actions.}
%\affiliation{%
%  \institution{Institute for Clarity in Documentation}
%  \streetaddress{P.O. Box 1212}
%  \city{Dublin}
%  \state{Ohio}
%  \postcode{43017-6221}
%}
%\email{webmaster@marysville-ohio.com}

%\author{Lars Th{\o}rv{\"a}ld}
%\authornote{This author is the
%  one who did all the really hard work.}
%\affiliation{%
%  \institution{The Th{\o}rv{\"a}ld Group}
%  \streetaddress{1 Th{\o}rv{\"a}ld Circle}
%  \city{Hekla}
%  \country{Iceland}}
%\email{larst@affiliation.org}

%\author{Valerie B\'eranger}
%\affiliation{%
%  \institution{Inria Paris-Rocquencourt}
%  \city{Rocquencourt}
%  \country{France}
%}
%\author{Aparna Patel}
%\affiliation{%
% \institution{Rajiv Gandhi University}
% \streetaddress{Rono-Hills}
% \city{Doimukh}
% \state{Arunachal Pradesh}
% \country{India}}
%\author{Huifen Chan}
%\affiliation{%
%  \institution{Tsinghua University}
%  \streetaddress{30 Shuangqing Rd}
%  \city{Haidian Qu}
%  \state{Beijing Shi}
%  \country{China}
%}

%\author{Charles Palmer}
%\affiliation{%
%  \institution{Palmer Research Laboratories}
%  \streetaddress{8600 Datapoint Drive}
%  \city{San Antonio}
%  \state{Texas}
%  \postcode{78229}}
%\email{cpalmer@prl.com}

%\author{John Smith}
%\affiliation{\institution{The Th{\o}rv{\"a}ld Group}}
%\email{jsmith@affiliation.org}

%\author{Julius P.~Kumquat}
%\affiliation{\institution{The Kumquat Consortium}}
%\email{jpkumquat@consortium.net}

% The default list of authors is too long for headers.
%\renewcommand{\shortauthors}{B. Trovato et al.}


\begin{abstract}

High-performance DSL developers work hard to take advantage of modern hardware. The DSL compilers have to build their own complex middle-ends before they can target a common back-end such as LLVM, which only handles single instruction streams with SIMD instructions. We introduce \framework{}, a common middle-end that can generate efficient code for modern processors and accelerators such as multicores, GPUs, FPGAs and distributed clusters.
\framework{} introduces a novel three-level IR that separates the
algorithm, how that algorithm is executed, and where intermediate data are stored.  This separation simplifies optimization and makes targeting multiple hardware architectures from the same algorithm easier.  As a result,
DSL compilers can be made considerably less complex with no loss of performance while immediately targeting multiple hardware or hardware combinations such as distributed nodes with both CPUs and GPUs.  We evaluated \framework by creating a new middle-end for the Halide and Julia compilers.
We show that \framework{} extends Halide and Julia with many new capabilities including the ability to: express new algorithms (such as recurrent filters and non-rectangular iteration spaces), perform new complex loop nest transformations (such as wavefront parallelization, loop shifting and loop fusion), and generate efficient code for more architectures (such as combinations of distributed clusters, multicores, GPUs and FPGAs).
Finally, we demonstrate that \framework{} can generate a very efficient code that matches the highly optimized Intel MKL gemm (generalized matrix multiplication) implementation.  We show that \framework{} can generate code that outperforms Intel MKL DNN convolutions and show speedups reaching $4\times$ over the original Halide due to the optimization enabled by \framework{}.
\end{abstract}

%
% The code below should be generated by the tool at
% http://dl.acm.org/ccs.cfm
% Please copy and paste the code instead of the example below.
%
\begin{CCSXML}
<ccs2012>
 <concept>
  <concept_id>10010520.10010553.10010562</concept_id>
  <concept_desc>Computer systems organization~Embedded systems</concept_desc>
  <concept_significance>500</concept_significance>
 </concept>
 <concept>
  <concept_id>10010520.10010575.10010755</concept_id>
  <concept_desc>Computer systems organization~Redundancy</concept_desc>
  <concept_significance>300</concept_significance>
 </concept>
 <concept>
  <concept_id>10010520.10010553.10010554</concept_id>
  <concept_desc>Computer systems organization~Robotics</concept_desc>
  <concept_significance>100</concept_significance>
 </concept>
 <concept>
  <concept_id>10003033.10003083.10003095</concept_id>
  <concept_desc>Networks~Network reliability</concept_desc>
  <concept_significance>100</concept_significance>
 </concept>
</ccs2012>
\end{CCSXML}

% TODO for camera ready.
%\ccsdesc[500]{Computer systems organization~Embedded systems}
%\ccsdesc[300]{Computer systems organization~Redundancy}
%\ccsdesc{Computer systems organization~Robotics}
%\ccsdesc[100]{Networks~Network reliability}


\keywords{Code Optimization, Generation, Polyhedral Model, CPU, GPU, FPGA, Distributed System, Heterogeneous System}


\maketitle



\input{tex/intro}

\input{tex/overview}

\input{tex/related}

\input{tex/threelayer}

\input{tex/DSLtoTiramisu}

\input{tex/codegen}

\input{tex/evaluation}

\input{tex/conclusion}



\bibliographystyle{ACM-Reference-Format}
\bibliography{bibliography}

\end{document}
